<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart - EasyCart</title>
    <link rel="stylesheet" href="../css/cart.css">
</head>
<body>
    <nav>
        <div class="logo">
            <span class="logo-icon">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="9" cy="21" r="1"></circle>
                    <circle cx="20" cy="21" r="1"></circle>
                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                </svg>
            </span>
            EasyCart
        </div>
        <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="product-listing.html">Products</a></li>
            <li><a href="cart.html" class="active">Cart <span class="cart-count" id="navCartCount">0</span></a></li>
            <li><a href="login.html">Login</a></li>
            <li><a href="my-orders.html">My Orders</a></li>
        </ul>
    </nav>

    <div class="container">
        <div class="page-header">
            <h1>
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="9" cy="21" r="1"></circle>
                    <circle cx="20" cy="21" r="1"></circle>
                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                </svg>
                Shopping Cart
            </h1>
            <span class="item-count" id="cartItemCount">0 items</span>
        </div>

        <div class="cart-layout">
            <div class="cart-items" id="cartItems">
                <!-- Cart items will be rendered by JavaScript -->
            </div>

            <div class="price-summary" id="priceSummary">
                <h2>Order Summary</h2>

                <div class="summary-row">
                    <span>Subtotal:</span>
                    <span id="subtotal">Rs. 0</span>
                </div>

                <div class="summary-row">
                    <span>Shipping:</span>
                    <span id="shipping">Rs. 0</span>
                </div>

                <div class="summary-row">
                    <span>Tax (18%):</span>
                    <span id="tax">Rs. 0</span>
                </div>

                <div class="promo-code">
                    <input type="text" placeholder="Enter promo code" id="promoInput">
                    <button onclick="applyPromo()">Apply</button>
                </div>

                <div class="summary-row total">
                    <span>Total:</span>
                    <span id="total">Rs. 0</span>
                </div>

                <a href="checkout.html" class="checkout-btn" id="checkoutBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect>
                        <line x1="1" y1="10" x2="23" y2="10"></line>
                    </svg>
                    Proceed to Checkout
                </a>

                <a href="product-listing.html" class="continue-shopping">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                    Continue Shopping
                </a>
            </div>
        </div>

        <!-- Empty Cart State -->
        <div class="empty-cart" id="emptyCart" style="display: none;">
            <svg width="80" height="80" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
            <h2>Your cart is empty</h2>
            <p>Looks like you haven't added anything to your cart yet.</p>
            <a href="product-listing.html" class="shop-now-btn">Start Shopping</a>
        </div>
    </div>

    <footer>
        <div class="footer-content">
            <p>&copy; 2026 EasyCart - All Rights Reserved</p>
        </div>
    </footer>

    <script>
        // Render cart items
        function renderCart() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const cartItemsContainer = document.getElementById('cartItems');
            const emptyCart = document.getElementById('emptyCart');
            const priceSummary = document.getElementById('priceSummary');
            
            if (cart.length === 0) {
                cartItemsContainer.style.display = 'none';
                priceSummary.style.display = 'none';
                emptyCart.style.display = 'flex';
                document.getElementById('cartItemCount').textContent = '0 items';
                updateNavCartCount();
                return;
            }
            
            cartItemsContainer.style.display = 'flex';
            priceSummary.style.display = 'block';
            emptyCart.style.display = 'none';
            
            cartItemsContainer.innerHTML = '';
            
            cart.forEach((item, index) => {
                const itemElement = document.createElement('div');
                itemElement.className = 'cart-item';
                itemElement.innerHTML = `
                    <div class="item-image">
                        <img src="${item.image}" alt="${item.name}">
                    </div>
                    <div class="item-details">
                        <h3>${item.name}</h3>
                        <p class="item-variant">Premium Quality</p>
                        <p class="item-price-mobile">Rs. ${item.price.toLocaleString()}</p>
                    </div>
                    <div class="quantity">
                        <button onclick="updateQuantity(${index}, -1)">-</button>
                        <span>${item.quantity}</span>
                        <button onclick="updateQuantity(${index}, 1)">+</button>
                    </div>
                    <div class="item-price">Rs. ${(item.price * item.quantity).toLocaleString()}</div>
                    <button class="remove-btn" onclick="removeItem(${index})" title="Remove item">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="3 6 5 6 21 6"></polyline>
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                            <line x1="10" y1="11" x2="10" y2="17"></line>
                            <line x1="14" y1="11" x2="14" y2="17"></line>
                        </svg>
                    </button>
                `;
                cartItemsContainer.appendChild(itemElement);
            });
            
            updateSummary();
            updateNavCartCount();
            
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartItemCount').textContent = `${totalItems} item${totalItems !== 1 ? 's' : ''}`;
        }

        // Update item quantity
        function updateQuantity(index, change) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            
            if (cart[index]) {
                cart[index].quantity = Math.max(1, cart[index].quantity + change);
                localStorage.setItem('cart', JSON.stringify(cart));
                renderCart();
            }
        }

        // Remove item from cart
        function removeItem(index) {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            
            if (cart[index]) {
                const removedItem = cart[index];
                cart.splice(index, 1);
                localStorage.setItem('cart', JSON.stringify(cart));
                renderCart();
            }
        }

        // Update order summary
        function updateSummary() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const shipping = subtotal > 999 ? 0 : 99;
            const tax = Math.round(subtotal * 0.18);
            const total = subtotal + shipping + tax;
            
            document.getElementById('subtotal').textContent = `Rs. ${subtotal.toLocaleString()}`;
            document.getElementById('shipping').textContent = shipping === 0 ? 'FREE' : `Rs. ${shipping}`;
            document.getElementById('tax').textContent = `Rs. ${tax.toLocaleString()}`;
            document.getElementById('total').textContent = `Rs. ${total.toLocaleString()}`;
        }

        // Update nav cart count
        function updateNavCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const count = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('navCartCount').textContent = count;
        }

        // Apply promo code
        function applyPromo() {
            const promoCode = document.getElementById('promoInput').value.trim().toUpperCase();
            
            if (promoCode === 'SAVE10') {
                alert('Promo code applied! 10% discount added.');
                // You can implement actual discount logic here
            } else if (promoCode === '') {
                alert('Please enter a promo code.');
            } else {
                alert('Invalid promo code. Try "SAVE10"');
            }
        }

        // Initialize
        renderCart();
    </script>
</body>
</html>
